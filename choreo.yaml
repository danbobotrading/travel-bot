version: 1.0

build:
  context: .
  dockerfile: Dockerfile

deploy:
  replicas: 1
  minReplicas: 0
  maxReplicas: 2
  cpu: 0.5
  memory: 512Mi

environmentVariables:
  - name: TELEGRAM_BOT_TOKEN
    value: ""
    required: true
  - name: TRAVELPAYOUTS_API_TOKEN
    value: ""
  - name: TRAVELPAYOUTS_AFFILIATE_ID
    value: "284678"  # Default fallback
  - name: INTERCAPE_AFFILIATE_ID
    value: "YOUR_INTERCAPE_AFFILIATE"
  - name: GREYHOUND_AFFILIATE_ID
    value: "YOUR_GREYHOUND_AFFILIATE"
  - name: TRANSLUX_AFFILIATE_ID
    value: "YOUR_TRANSLUX_AFFILIATE"
  - name: PORT
    value: "8080"

healthCheck:
  liveness:
    http:
      path: /health
      port: 8080
    initialDelaySeconds: 30
    periodSeconds: 10

network:
  ingress:
    - port: 8080
      context: /
      expose: true
